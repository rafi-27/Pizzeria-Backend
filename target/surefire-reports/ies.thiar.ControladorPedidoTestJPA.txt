-------------------------------------------------------------------------------
Test set: ies.thiar.ControladorPedidoTestJPA
-------------------------------------------------------------------------------
Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 4.550 s <<< FAILURE! -- in ies.thiar.ControladorPedidoTestJPA
ies.thiar.ControladorPedidoTestJPA.registrarPedido -- Time elapsed: 4.533 s <<< ERROR!
jakarta.persistence.RollbackException: Error while committing the transaction
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.internal.ExceptionConverterImpl.convertCommitException(ExceptionConverterImpl.java:83)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:104)
	at ies.thiar/ies.thiar.controlador.dao.imp.JPAPedidoDao.insert(JPAPedidoDao.java:38)
	at ies.thiar/ies.thiar.controlador.ControladorPedido.insertPedido(ControladorPedido.java:36)
	at ies.thiar/ies.thiar.ControladorPedidoTestJPA.registrarPedido(ControladorPedidoTestJPA.java:59)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: java.lang.IllegalStateException: org.hibernate.TransientPropertyValueException: object references an unsaved transient instance - save the transient instance before flushing : ies.thiar.Modelo.LineaPedido.product -> ies.thiar.Modelo.Producto
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:161)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:175)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:182)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1424)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:474)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2232)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1928)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	... 72 more
Caused by: org.hibernate.TransientPropertyValueException: object references an unsaved transient instance - save the transient instance before flushing : ies.thiar.Modelo.LineaPedido.product -> ies.thiar.Modelo.Producto
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.engine.spi.CascadingActions$8.noCascade(CascadingActions.java:381)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.engine.internal.Cascade.cascade(Cascade.java:168)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.event.internal.AbstractSaveEventListener.cascadeBeforeSave(AbstractSaveEventListener.java:442)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.event.internal.DefaultPersistEventListener.justCascade(DefaultPersistEventListener.java:167)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.event.internal.DefaultPersistEventListener.entityIsPersistent(DefaultPersistEventListener.java:160)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:125)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:118)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.internal.SessionImpl.persistOnFlush(SessionImpl.java:797)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.engine.spi.CascadingActions$8.cascade(CascadingActions.java:342)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.engine.spi.CascadingActions$8.cascade(CascadingActions.java:332)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.engine.internal.Cascade.cascadeToOne(Cascade.java:512)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:433)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:219)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.engine.internal.Cascade.cascadeCollectionElements(Cascade.java:546)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.engine.internal.Cascade.cascadeCollection(Cascade.java:476)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:436)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:219)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.engine.internal.Cascade.cascade(Cascade.java:152)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.event.internal.AbstractSaveEventListener.cascadeAfterSave(AbstractSaveEventListener.java:474)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.event.internal.DefaultPersistEventListener.justCascade(DefaultPersistEventListener.java:168)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.event.internal.DefaultPersistEventListener.entityIsPersistent(DefaultPersistEventListener.java:160)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:125)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:118)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.internal.SessionImpl.persistOnFlush(SessionImpl.java:797)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.engine.spi.CascadingActions$8.cascade(CascadingActions.java:342)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.engine.spi.CascadingActions$8.cascade(CascadingActions.java:332)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.engine.internal.Cascade.cascadeToOne(Cascade.java:512)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:433)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:219)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.engine.internal.Cascade.cascade(Cascade.java:152)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.event.internal.AbstractSaveEventListener.cascadeBeforeSave(AbstractSaveEventListener.java:442)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.event.internal.DefaultPersistEventListener.justCascade(DefaultPersistEventListener.java:167)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.event.internal.DefaultPersistEventListener.entityIsPersistent(DefaultPersistEventListener.java:160)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:125)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:118)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.internal.SessionImpl.persistOnFlush(SessionImpl.java:797)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.engine.spi.CascadingActions$8.cascade(CascadingActions.java:342)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.engine.spi.CascadingActions$8.cascade(CascadingActions.java:332)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.engine.internal.Cascade.cascadeToOne(Cascade.java:512)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:433)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:219)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.engine.internal.Cascade.cascadeCollectionElements(Cascade.java:546)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.engine.internal.Cascade.cascadeCollection(Cascade.java:476)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:436)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:219)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.engine.internal.Cascade.cascade(Cascade.java:152)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.event.internal.AbstractFlushingEventListener.cascadeOnFlush(AbstractFlushingEventListener.java:155)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.event.internal.AbstractFlushingEventListener.prepareEntityFlushes(AbstractFlushingEventListener.java:145)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.event.internal.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:79)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:38)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)
	at org.hibernate.orm.core@6.0.2.Final/org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1420)
	... 79 more

